/*
 * File: app/view/LoginViewController.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Code.view.LoginViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.login',

    onButtonClick: function(button, e, eOpts) {
        var username = button.up("form").getValues()["username"];
        Ext.Ajax.request({
            url:SERVER+'/user/sign',
            params:{username:username},
            success:function(){
                Ext.getStore("ProjectStore").load({url:SERVER+'/project/list'});
                Ext.getStore("DbStore").load({url:SERVER+'/db'});
                Ext.getCmp("codeviewport").getLayout().next();
            },
            failure:function(){
                Ext.Msg.alert("提示","服务不可达");
            }
        });
    }

});
